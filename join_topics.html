<html>
<head>
	<script type="text/javascript" src="bower_components/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="bower_components/handlebars/handlebars.min.js"></script>
	<script type="text/javascript" src="bower_components/moment/min/moment.min.js"></script>
	
	
	<script type="text/javascript" src="js/helpers.js"></script>
	<script type="text/javascript" src="js/gimme.js"></script>
	<script type="text/javascript" src="js/extras.js"></script>
	<script type="text/javascript" src="js/fastclick.js"></script>
	
	
	<link href="bower_components/sassquatch/css/sassquatch.css" type="text/css" rel="stylesheet" />
	<link href="css/whitney.css" type="text/css" rel="stylesheet" /> <!-- whitney will get bowerized -->
	<link href="css/patch.css" type="text/css" rel="stylesheet" />
	<link href="css/groups.css" type="text/css" rel="stylesheet" />
	
</head>
<body>

<script type="text/html" id="topiclist-template">
	Pick some topics yo
	<ul class="dividedList">
	{{#topics}}
		<li>{{name}}</li>
	{{/topics}}
	</ul>
</script>



<script type="text/html" id="main-template">

<div class="shade off" id="shade" style="display: none;"></div>

<div class="panel off" id="panel-topiclist" style="display: none;">
	<div class="doc-bounds--medium">
		<div class="doc-box" style="position: relative;">
			<div id="panel-topiclist-closse" class="clickable nobreak inverted" style="position: absolute; left: 50%; top: -50px; z-index: 2; font-size: 32px; width: 40px; text-align: center; margin-left: -20px; color: rgba(255,255,255,.4)"><span class="icon_close_alt2"></span></div>
			<div id="content-topiclist">
			</div>
		</div>
	</div>
</div>


<!-- screen start -->
<div class="doc-stripe" id="header"><div class="doc-bounds">
	<div class="line">	
		<div class="unit size1of2">
			<img src="https://secure.meetup.com/img/8308650022681532654/header/logo-2x.png" id="logo" />
		</div>

		<div class="unit size1of2 align-right">
			<a class="display-none inlineblock-at-handheld bold fake-feature" style="border-left: 1px solid #ddd; padding-left: 12px;">Next &raquo;</a>
		</div>

	</div>
</div></div>


<div class="doc-stripe bg-gray"><div class="doc-bounds">
	
	<div class="fixflex">
		<div class="flex center-at-handheld">
			<h1>What are you interested in?</h1>
		</div>
		<div class="fix">
			<a href="" class="button fake-feature hide-at-handheld">Next</a>
		</div>
	</div>



	<ul class="blockList has6 has3-at-medium has2-at-handheld" id="catList">
		{{#categories}}
		
			<li class="clickable" onclick="" data-topics="{{json best_topics}}">
				<div class="photo-button">
					<div class="photo-button-photo" style="background-image: url({{photo.photo_link}});"></div>
					<div class="photo-button-check"></div>
					<div class="photo-button-label doc-content">
						<p class="margin-minimal">{{name}}</p>
					</div>
				</div>
				
					
					
				<!-- </li> -->
		{{/categories}}

	</ul>	
	
</div></div>

</script>




<script type="text/javascript">

$(function(){	
	
	// kill 300ms delay
	FastClick.attach(document.body);
	
	/* 
	* Uncomment the data you want -- it will be available in the template 
	* Check out the Meetup API docs for a list of fields to use in the template
	* http://www.meetup.com/meetup_api/docs/
	*
	* A few notes:
	* -- You can specify any field supported by the API
	* -- You can leave every field unspecified except "gimme" -- something random/fun will be picked for you.
	*/
	
	/* Add your own pre-rendering JS here */
	function getHashParams() {
		var hashParams = {};
		var e, a = /\+/g,
			// Regex for replacing addition symbol with a space
			r = /([^&;=]+)=?([^&;]*)/g,
			d = function(s) {
				return decodeURIComponent(s.replace(a, " "));
			},
			q = window.location.hash.substring(1);

		while (e = r.exec(q))
		hashParams[d(e[1])] = d(e[2]);

		return hashParams;
	}
	var opts = getHashParams();	

	
	var shoppingList = [
		//{"gimme": "groups", "page": 40, "zip": "97227"},		
		//{"gimme": "group"},
		//{"gimme": "open_events"}, 
		//{"gimme": "dates_with_open_events"}, 
		//{"gimme": "events", "page": 15}, 
		//{"gimme": "event"},		
		//{"gimme": "rsvps"},	
		//{"gimme": "event_comments"},
		//{"gimme": "photo_albums"},
		//{"gimme": "photos"},
		//{"gimme": "members", "page": 40},
		//{"gimme": "profile"},
		{"gimme": "categories"},
		//{"gimme": "discussions", "page": 9}
	];


	var extraContext = $.extend( shoppingList, {"opts": opts} ); // anything else to add to the handlebars context?
	
	// Let's go!
	var gme = new Gimme(shoppingList, function(){
		$("#template-holder").load('./js/partials.html', function(){ // load partials
			$('body').append( Handlebars.compile( $('#main-template').html() )( gme.context ) ); // render template
			defaultRenderCompleteActions(); // do standard jquery magicks
			
			
			$(document).on('click', 'li', function(){
				var $this = $(this);
				if($this.hasClass('on')){
					$this.removeClass('on');
					$this.find('.filled').removeClass('on');
				}
				else{
					$this.addClass('on');
					$this.find('.filled').addClass('on');
				}
			});
			
		});
	}, extraContext);
});
</script>

<div id="template-holder"></div>

</body>
</html>
